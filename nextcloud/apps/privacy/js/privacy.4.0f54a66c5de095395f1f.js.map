{"version":3,"sources":["webpack:///./src/Admins.vue?b8da","webpack:///./src/Admins.vue?020f","webpack:///src/Admins.vue","webpack:///./src/Admins.vue","webpack:///./node_modules/vue-click-outside/index.js"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","class","hidden","isLoading","_v","_l","admin","key","id","attrs","internal","displayname","_e","on","$event","deleteAdditionalAdmin","_s","t","isAdding","openNewAdmin","directives","name","rawName","value","expression","preventDefault","addAdditionalAdmin","additionalAdminPlaceholderLabel","domProps","target","composing","newAdditionalAdminInputField","validate","binding","console","warn","isServer","vNode","componentInstance","$isServer","module","exports","bind","el","handler","e","context","elements","path","composedPath","length","unshift","contains","popupItem","i","len","isPopup","__vueClickOutside__","callback","document","addEventListener","update","unbind","removeEventListener"],"mappings":"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","file":"privacy.4.0f54a66c5de095395f1f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"who-has-access\"},[_c('span',{staticClass:\"icon icon-loading\",class:{ hidden: !_vm.isLoading }}),_vm._v(\" \"),_vm._l((_vm.admins),function(admin){return _c('div',{key:admin.id,staticClass:\"admin-avatar-container\"},[_c('Avatar',{attrs:{\"user\":admin.internal ? admin.id : null,\"display-name\":admin.displayname,\"size\":64,\"is-no-user\":!admin.internal}}),_vm._v(\" \"),(!admin.internal)?_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-close\"},on:{\"click\":function($event){return _vm.deleteAdditionalAdmin(admin)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('privacy', 'Remove external admin'))+\"\\n\\t\\t\\t\")])],1):_vm._e()],1)}),_vm._v(\" \"),(_vm.isAdmin)?_c('div',[(!_vm.isAdding)?_c('Actions',{staticClass:\"addAdditionalAdmin\"},[_c('ActionButton',{attrs:{\"icon\":\"icon-add\"},on:{\"click\":_vm.openNewAdmin}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('privacy', 'Add external admin'))+\"\\n\\t\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),(_vm.isAdding)?_c('form',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeNewAdmin),expression:\"closeNewAdmin\"}],staticClass:\"addAdditionalAdminFormContainer\",on:{\"submit\":function($event){$event.preventDefault();return _vm.addAdditionalAdmin($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newAdditionalAdminInputField),expression:\"newAdditionalAdminInputField\"}],attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"autocomplete\":\"new-password\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.additionalAdminPlaceholderLabel},domProps:{\"value\":(_vm.newAdditionalAdminInputField)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newAdditionalAdminInputField=$event.target.value}}}),_vm._v(\" \"),_c('input',{staticClass:\"icon-confirm\",attrs:{\"type\":\"submit\",\"value\":\"\"}})]):_vm._e()],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"who-has-access\">\n\t\t<span :class=\"{ hidden: !isLoading }\" class=\"icon icon-loading\" />\n\t\t<div v-for=\"admin in admins\" :key=\"admin.id\" class=\"admin-avatar-container\">\n\t\t\t<Avatar :user=\"admin.internal ? admin.id : null\"\n\t\t\t\t:display-name=\"admin.displayname\" :size=\"64\" :is-no-user=\"!admin.internal\" />\n\t\t\t<Actions v-if=\"!admin.internal\">\n\t\t\t\t<ActionButton icon=\"icon-close\" @click=\"deleteAdditionalAdmin(admin)\">\n\t\t\t\t\t{{ t('privacy', 'Remove external admin') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\n\t\t<div v-if=\"isAdmin\">\n\t\t\t<Actions v-if=\"!isAdding\" class=\"addAdditionalAdmin\">\n\t\t\t\t<ActionButton icon=\"icon-add\" @click=\"openNewAdmin\">\n\t\t\t\t\t{{ t('privacy', 'Add external admin') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t\t<form v-if=\"isAdding\"\n\t\t\t\tv-click-outside=\"closeNewAdmin\"\n\t\t\t\tclass=\"addAdditionalAdminFormContainer\"\n\t\t\t\t@submit.prevent=\"addAdditionalAdmin\">\n\t\t\t\t<input v-model=\"newAdditionalAdminInputField\" type=\"text\" maxlength=\"64\"\n\t\t\t\t\tautocomplete=\"new-password\" autocorrect=\"off\" autocapitalize=\"off\"\n\t\t\t\t\tspellcheck=\"false\" :placeholder=\"additionalAdminPlaceholderLabel\">\n\t\t\t\t<input type=\"submit\" value=\"\" class=\"icon-confirm\">\n\t\t\t\t<!-- add icon-loading -->\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ClickOutside from 'vue-click-outside'\nimport HttpClient from 'nextcloud-axios'\nimport Vue from 'vue'\n\nimport Actions from 'nextcloud-vue/dist/Components/Actions'\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton'\nimport Avatar from 'nextcloud-vue/dist/Components/Avatar'\nimport { generateUrl } from 'nextcloud-server/dist/router'\n\nexport default {\n\tname: 'Admins',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tAvatar\n\t},\n\tdirectives: {\n\t\tClickOutside\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tadmins: [],\n\t\t\tnewAdditionalAdminInputField: '',\n\t\t\tisAdmin: false,\n\t\t\tisLoading: true,\n\t\t\tisAdding: false,\n\t\t\tisSavingChanges: false\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.isAdmin = OC.isUserAdmin()\n\n\t\tconst url = generateUrl('/apps/privacy/api/admins')\n\t\tHttpClient.get(url).then(resp => {\n\t\t\tVue.set(this, 'admins', resp.data)\n\t\t\tthis.isLoading = false\n\t\t})\n\t},\n\tmethods: {\n\t\topenNewAdmin() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isAdding = true\n\t\t\t}, 0)\n\t\t},\n\t\tcloseNewAdmin() {\n\t\t\tthis.isAdding = false\n\t\t\tthis.newAdditionalAdminInputField = ''\n\t\t},\n\t\taddAdditionalAdmin() {\n\t\t\tconsole.warn(this.newAdditionalAdminInputField)\n\t\t\tconst url = generateUrl('/apps/privacy/api/admins')\n\t\t\tthis.isSavingChanges = true\n\n\t\t\tHttpClient.post(url, { name: this.newAdditionalAdminInputField }).then(resp => {\n\t\t\t\tthis.admins.push(resp.data)\n\n\t\t\t\tthis.isSavingChanges = false\n\t\t\t\tthis.isAdding = false\n\t\t\t\tthis.newAdditionalAdminInputField = ''\n\t\t\t})\n\t\t},\n\t\tdeleteAdditionalAdmin(admin) {\n\t\t\tconst url = generateUrl('/apps/privacy/api/admins/{id}', { id: admin.id })\n\t\t\tHttpClient.delete(url).then(resp => {\n\t\t\t\tconst index = this.admins.indexOf(admin)\n\t\t\t\tthis.admins.splice(index, 1)\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n","import { render, staticRenderFns } from \"./Admins.vue?vue&type=template&id=6691f890&\"\nimport script from \"./Admins.vue?vue&type=script&lang=js&\"\nexport * from \"./Admins.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function validate(binding) {\r\n  if (typeof binding.value !== 'function') {\r\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction isPopup(popupItem, elements) {\r\n  if (!popupItem || !elements)\r\n    return false\r\n\r\n  for (var i = 0, len = elements.length; i < len; i++) {\r\n    try {\r\n      if (popupItem.contains(elements[i])) {\r\n        return true\r\n      }\r\n      if (elements[i].contains(popupItem)) {\r\n        return false\r\n      }\r\n    } catch(e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isServer(vNode) {\r\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\r\n}\r\n\r\nexports = module.exports = {\r\n  bind: function (el, binding, vNode) {\r\n    if (!validate(binding)) return\r\n\r\n    // Define Handler and cache it on the element\r\n    function handler(e) {\r\n      if (!vNode.context) return\r\n\r\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\r\n      var elements = e.path || (e.composedPath && e.composedPath())\r\n      elements && elements.length > 0 && elements.unshift(e.target)\r\n      \r\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\r\n\r\n      el.__vueClickOutside__.callback(e)\r\n    }\r\n\r\n    // add Event Listeners\r\n    el.__vueClickOutside__ = {\r\n      handler: handler,\r\n      callback: binding.value\r\n    }\r\n    !isServer(vNode) && document.addEventListener('click', handler)\r\n  },\r\n\r\n  update: function (el, binding) {\r\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\r\n  },\r\n  \r\n  unbind: function (el, binding, vNode) {\r\n    // Remove Event Listeners\r\n    !isServer(vNode) && document.removeEventListener('click', el.__vueClickOutside__.handler)\r\n    delete el.__vueClickOutside__\r\n  }\r\n}\r\n"],"sourceRoot":""}