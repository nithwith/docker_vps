{"version":3,"sources":["webpack:///./src/Encryption.vue?c75c","webpack:///./src/Encryption.vue?11dc","webpack:///src/Encryption.vue","webpack:///./src/Encryption.vue","webpack:///./node_modules/vue-click-outside/index.js"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","isEditing","expression","domProps","_s","label","_v","isAdmin","attrs","on","openEditFullDiskEncryptionForm","_e","isSavingChanges","Array","isArray","fullDiskEncryptionEnabled","_i","$event","$$a","$$el","target","$$c","checked","$$i","concat","slice","saveFullDiskEncryptionForm","checkboxLabel","validate","binding","console","warn","isServer","vNode","componentInstance","$isServer","module","exports","bind","el","handler","e","context","elements","path","composedPath","length","unshift","contains","popupItem","i","len","isPopup","__vueClickOutside__","callback","document","addEventListener","update","unbind","removeEventListener"],"mappings":"iGAAA,I,iFCAoL,EC6BpL,CACA,kBACA,YACA,YACA,kBAEA,YACA,kBAEA,KATA,WAUA,OACA,6BACA,+BACA,WACA,aACA,qBAGA,UACA,MADA,WAEA,wEAEA,kEACA,4FACA,0IACA,+BACA,iEACA,mEAEA,8JACA,0IACA,8BAVA,4DAaA,cAhBA,WAiBA,mEAGA,QAtCA,WAuCA,sEACA,0EACA,+BAEA,SACA,+BADA,WACA,WACA,sBACA,gBACA,IAEA,iCANA,WAOA,mBAEA,2BATA,WASA,WACA,gEACA,wBAEA,8EACA,qBACA,oB,SChFIA,EAAY,YACd,EHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAQV,EAAIW,UAAWC,WAAW,eAAeC,SAAS,CAAC,UAAYb,EAAIc,GAAGd,EAAIe,UAAUf,EAAIgB,GAAG,KAAMhB,EAAIiB,UAAYjB,EAAIW,UAAWP,EAAG,UAAU,CAACA,EAAG,eAAe,CAACc,MAAM,CAAC,KAAO,eAAeC,GAAG,CAAC,MAAQnB,EAAIoB,mCAAmC,GAAGpB,EAAIqB,KAAKrB,EAAIgB,GAAG,KAAMhB,EAAa,UAAEI,EAAG,MAAM,CAACG,WAAW,CAAC,CAACC,KAAK,gBAAgBC,QAAQ,kBAAkBC,MAAOV,EAAoC,iCAAEY,WAAW,sCAAsC,CAACR,EAAG,OAAO,CAACA,EAAG,QAAQ,CAACG,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOV,EAA6B,0BAAEY,WAAW,8BAA8BN,YAAY,WAAWY,MAAM,CAAC,GAAK,oCAAoC,SAAWlB,EAAIsB,gBAAgB,KAAO,WAAW,KAAO,qCAAqCT,SAAS,CAAC,QAAUU,MAAMC,QAAQxB,EAAIyB,2BAA2BzB,EAAI0B,GAAG1B,EAAIyB,0BAA0B,OAAO,EAAGzB,EAA6B,2BAAGmB,GAAG,CAAC,OAAS,CAAC,SAASQ,GAAQ,IAAIC,EAAI5B,EAAIyB,0BAA0BI,EAAKF,EAAOG,OAAOC,IAAIF,EAAKG,QAAuB,GAAGT,MAAMC,QAAQI,GAAK,CAAC,IAAaK,EAAIjC,EAAI0B,GAAGE,EAAhB,MAA4BC,EAAKG,QAASC,EAAI,IAAIjC,EAAIyB,0BAA0BG,EAAIM,OAAO,CAA3F,QAAwGD,GAAK,IAAIjC,EAAIyB,0BAA0BG,EAAIO,MAAM,EAAEF,GAAKC,OAAON,EAAIO,MAAMF,EAAI,UAAWjC,EAAIyB,0BAA0BM,GAAM/B,EAAIoC,+BAA+BpC,EAAIgB,GAAG,KAAKZ,EAAG,QAAQ,CAACc,MAAM,CAAC,IAAM,sCAAsC,CAAClB,EAAIgB,GAAG,aAAahB,EAAIc,GAAGd,EAAIqC,eAAe,kBAAkBrC,EAAIqB,MAAM,IACrmD,IGUpB,EACA,KACA,KACA,MAIa,UAAAtB,E,2BClBf,SAASuC,EAASC,GAChB,MAA6B,mBAAlBA,EAAQ7B,QACjB8B,QAAQC,KAAK,2CAA4CF,EAAQ3B,WAAY,uBACtE,GA0BX,SAAS8B,EAASC,GAChB,YAA0C,IAA5BA,EAAMC,mBAAqCD,EAAMC,kBAAkBC,UAGzEC,EAAOC,QAAU,CACzBC,KAAM,SAAUC,EAAIV,EAASI,GAI3B,SAASO,EAAQC,GACf,GAAKR,EAAMS,QAAX,CAGA,IAAIC,EAAWF,EAAEG,MAASH,EAAEI,cAAgBJ,EAAEI,eAC9CF,GAAYA,EAASG,OAAS,GAAKH,EAASI,QAAQN,EAAErB,QAElDmB,EAAGS,SAASP,EAAErB,SApCxB,SAAiB6B,EAAWN,GAC1B,IAAKM,IAAcN,EACjB,OAAO,EAET,IAAK,IAAIO,EAAI,EAAGC,EAAMR,EAASG,OAAQI,EAAIC,EAAKD,IAC9C,IACE,GAAID,EAAUD,SAASL,EAASO,IAC9B,OAAO,EAET,GAAIP,EAASO,GAAGF,SAASC,GACvB,OAAO,EAET,MAAMR,GACN,OAAO,EAIX,OAAO,EAmB0BW,CAAQnB,EAAMS,QAAQO,UAAWN,IAE9DJ,EAAGc,oBAAoBC,SAASb,IAZ7Bb,EAASC,KAgBdU,EAAGc,oBAAsB,CACvBb,QAASA,EACTc,SAAUzB,EAAQ7B,QAEnBgC,EAASC,IAAUsB,SAASC,iBAAiB,QAAShB,KAGzDiB,OAAQ,SAAUlB,EAAIV,GAChBD,EAASC,KAAUU,EAAGc,oBAAoBC,SAAWzB,EAAQ7B,QAGnE0D,OAAQ,SAAUnB,EAAIV,EAASI,IAE5BD,EAASC,IAAUsB,SAASI,oBAAoB,QAASpB,EAAGc,oBAAoBb,gBAC1ED,EAAGc","file":"privacy.5.38ef4d292f450814823d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"who-has-access\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEditing),expression:\"!isEditing\"}],domProps:{\"innerHTML\":_vm._s(_vm.label)}}),_vm._v(\" \"),(_vm.isAdmin && !_vm.isEditing)?_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-rename\"},on:{\"click\":_vm.openEditFullDiskEncryptionForm}})],1):_vm._e(),_vm._v(\" \"),(_vm.isEditing)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.cancelEditFullDiskEncryptionForm),expression:\"cancelEditFullDiskEncryptionForm\"}]},[_c('form',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullDiskEncryptionEnabled),expression:\"fullDiskEncryptionEnabled\"}],staticClass:\"checkbox\",attrs:{\"id\":\"fullDiskEncryptionEnabledCheckbox\",\"disabled\":_vm.isSavingChanges,\"type\":\"checkbox\",\"name\":\"fullDiskEncryptionEnabledCheckbox\"},domProps:{\"checked\":Array.isArray(_vm.fullDiskEncryptionEnabled)?_vm._i(_vm.fullDiskEncryptionEnabled,null)>-1:(_vm.fullDiskEncryptionEnabled)},on:{\"change\":[function($event){var $$a=_vm.fullDiskEncryptionEnabled,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullDiskEncryptionEnabled=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullDiskEncryptionEnabled=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullDiskEncryptionEnabled=$$c}},_vm.saveFullDiskEncryptionForm]}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"fullDiskEncryptionEnabledCheckbox\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.checkboxLabel)+\"\\n\\t\\t\\t\")])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Encryption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Encryption.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"who-has-access\">\n\t\t<!-- eslint-disable-next-line vue/no-v-html -->\n\t\t<p v-show=\"!isEditing\" v-html=\"label\" />\n\t\t<Actions v-if=\"isAdmin && !isEditing\">\n\t\t\t<ActionButton icon=\"icon-rename\" @click=\"openEditFullDiskEncryptionForm\" />\n\t\t</Actions>\n\t\t<div v-if=\"isEditing\" v-click-outside=\"cancelEditFullDiskEncryptionForm\">\n\t\t\t<form>\n\t\t\t\t<input id=\"fullDiskEncryptionEnabledCheckbox\" v-model=\"fullDiskEncryptionEnabled\"\n\t\t\t\t\t:disabled=\"isSavingChanges\" type=\"checkbox\" name=\"fullDiskEncryptionEnabledCheckbox\"\n\t\t\t\t\tclass=\"checkbox\" @change=\"saveFullDiskEncryptionForm\">\n\t\t\t\t<label for=\"fullDiskEncryptionEnabledCheckbox\">\n\t\t\t\t\t{{ checkboxLabel }}\n\t\t\t\t</label>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport HttpClient from 'nextcloud-axios'\nimport ClickOutside from 'vue-click-outside'\n\nimport { generateUrl } from 'nextcloud-server/dist/router'\n\nimport Actions from 'nextcloud-vue/dist/Components/Actions'\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton'\n\nexport default {\n\tname: 'Encryption',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton\n\t},\n\tdirectives: {\n\t\tClickOutside\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfullDiskEncryptionEnabled: false,\n\t\t\tserverSideEncryptionEnabled: false,\n\t\t\tisAdmin: true,\n\t\t\tisEditing: false,\n\t\t\tisSavingChanges: false\n\t\t}\n\t},\n\tcomputed: {\n\t\tlabel() {\n\t\t\tif (!this.serverSideEncryptionEnabled && !this.fullDiskEncryptionEnabled) {\n\t\t\t\treturn t('privacy', 'Your files are not protected by encryption.')\n\t\t\t} else if (this.serverSideEncryptionEnabled && !this.fullDiskEncryptionEnabled) {\n\t\t\t\treturn t('privacy', 'Your files are encrypted with {linkopen}server-side-encryption ↗{linkclose}.')\n\t\t\t\t\t.replace('{linkopen}', '<a href=\"https://nextcloud.com/blog/encryption-in-nextcloud/\" target=\"_blank\" title=\"\" rel=\"noreferrer noopener\">')\n\t\t\t\t\t.replace('{linkclose}', '</a>')\n\t\t\t} else if (!this.serverSideEncryptionEnabled && this.fullDiskEncryptionEnabled) {\n\t\t\t\treturn t('privacy', 'This server is protected with full-disk-encryption.')\n\t\t\t} else {\n\t\t\t\treturn t('privacy', 'Your files are encrypted with {linkopen}server-side-encryption ↗{linkclose}. Additionally, this server is protected with full-disk-encryption.')\n\t\t\t\t\t.replace('{linkopen}', '<a href=\"https://nextcloud.com/blog/encryption-in-nextcloud/\" target=\"_blank\" title=\"\" rel=\"noreferrer noopener\">')\n\t\t\t\t\t.replace('{linkclose}', '</a>')\n\t\t\t}\n\t\t},\n\t\tcheckboxLabel() {\n\t\t\treturn t('privacy', 'This server is using full-disk-encryption.')\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.fullDiskEncryptionEnabled = this.$parent.fullDiskEncryptionEnabled\n\t\tthis.serverSideEncryptionEnabled = this.$parent.serverSideEncryptionEnabled\n\t\tthis.isAdmin = OC.isUserAdmin()\n\t},\n\tmethods: {\n\t\topenEditFullDiskEncryptionForm() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isEditing = true\n\t\t\t}, 0)\n\t\t},\n\t\tcancelEditFullDiskEncryptionForm() {\n\t\t\tthis.isEditing = false\n\t\t},\n\t\tsaveFullDiskEncryptionForm() {\n\t\t\tconst url = generateUrl('/apps/privacy/api/fullDiskEncryption')\n\t\t\tthis.isSavingChanges = true\n\n\t\t\tHttpClient.post(url, { enabled: this.fullDiskEncryptionEnabled ? '1' : '0' }).then(resp => {\n\t\t\t\tthis.isSavingChanges = false\n\t\t\t\tthis.isEditing = false\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n","import { render, staticRenderFns } from \"./Encryption.vue?vue&type=template&id=1aa9712c&\"\nimport script from \"./Encryption.vue?vue&type=script&lang=js&\"\nexport * from \"./Encryption.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function validate(binding) {\r\n  if (typeof binding.value !== 'function') {\r\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction isPopup(popupItem, elements) {\r\n  if (!popupItem || !elements)\r\n    return false\r\n\r\n  for (var i = 0, len = elements.length; i < len; i++) {\r\n    try {\r\n      if (popupItem.contains(elements[i])) {\r\n        return true\r\n      }\r\n      if (elements[i].contains(popupItem)) {\r\n        return false\r\n      }\r\n    } catch(e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isServer(vNode) {\r\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\r\n}\r\n\r\nexports = module.exports = {\r\n  bind: function (el, binding, vNode) {\r\n    if (!validate(binding)) return\r\n\r\n    // Define Handler and cache it on the element\r\n    function handler(e) {\r\n      if (!vNode.context) return\r\n\r\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\r\n      var elements = e.path || (e.composedPath && e.composedPath())\r\n      elements && elements.length > 0 && elements.unshift(e.target)\r\n      \r\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\r\n\r\n      el.__vueClickOutside__.callback(e)\r\n    }\r\n\r\n    // add Event Listeners\r\n    el.__vueClickOutside__ = {\r\n      handler: handler,\r\n      callback: binding.value\r\n    }\r\n    !isServer(vNode) && document.addEventListener('click', handler)\r\n  },\r\n\r\n  update: function (el, binding) {\r\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\r\n  },\r\n  \r\n  unbind: function (el, binding, vNode) {\r\n    // Remove Event Listeners\r\n    !isServer(vNode) && document.removeEventListener('click', el.__vueClickOutside__.handler)\r\n    delete el.__vueClickOutside__\r\n  }\r\n}\r\n"],"sourceRoot":""}